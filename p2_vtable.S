	.syntax unified
	.cpu cortex-m4
	.thumb

	.global vtable
	.global default_interrupt_handler

	.type vtable, %object
	.section .vector_table, "a", %progbits

vtable:
	//Cortex M4 Interupts
	.word _estack
	.word reset_handler
	.word NMI_handler
	.word hard_handler
	.word MMF_handler
	.word bus_handler
	.word usage_handler
	.word 0
	.word 0
	.word 0
	.word 0
	.word SVC_handler
	.word 0
	.word 0
	.word pending_SV_handler
	.word SYSTick_handler
	//STM32 specific
	.word WWDG_IRQ_handler
	.word PVD_IRQ_handler
	.word TAMP_IRQ_handler
	.word RTC_IRQ_handler
	.word flash_IRQ_handler
	.word RCC_IRQ_handler
	.word EXTI0_IRQ_handler
	.word EXTI1_IRQ_handler
	.word EXTI2_IRQ_handler
	.word EXTI3_IRQ_handler
	.word EXTI4_IRQ_handler
	.word DMA1_S0_IRQ_handler
	.word DMA1_S1_IRQ_handler
	.word DMA1_S2_IRQ_handler
	.word DMA1_S3_IRQ_handler
	.word DMA1_S4_IRQ_handler
	.word DMA1_S5_IRQ_handler
	.word DMA1_S6_IRQ_handler
	.word ADC_IRQ_handler
	.word TIM1_BR_IRQ_handler
	.word TIM1_UP_IRQ_handler
	.word TIM1_TC_IRQ_handler
	.word TIM1_CC_IRQ_handler
	.word TIM2_IRQ_handler
	.word TIM3_IRQ_handler
	.word TIM4_IRQ_handler
	.word I2C1_EV_IRQ_handler
	.word I2C1_ER_IRQ_handler
	.word SPI1_IRQ_handler
	.word SPI2_IRQ_handler
	.word USART1_IRQ_handler
	.word USART2_IRQ_handler
	.word EXTI15_IRQ_handler
	.word 0
	.word RTC_Alarm_IRQ_handler
	.word OTG_WKUP_IRQ_handler
	.word 0
	.word 0
	.word 0
	.word 0
	.word DMA1_S7_IRQ_handler
	.word 0
	.word SDIO_IRQ_handler
	.word TIM5_IRQ_handler
	.word SPI3_IRQ_handler
	.word DMA2_S0_IRQ_handler
	.word DMA2_S1_IRQ_handler
	.word DMA2_S2_IRQ_handler
	.word DMA2_S3_IRQ_handler
	.word DMA2_S4_IRQ_handler
	.word OTG_IRQ_handler
	.word DMA2_S5_IRQ_handler
	.word DMA2_S6_IRQ_handler
	.word DMA2_S7_IRQ_handler
	.word USART6_IRQ_handler
	.word I2C3_EV_IRQ_handler
	.word I2C3_ER_IRQ_handler
	.word 0
	.word 0
	.word 0
	.word 0
	.word 0
	.word 0
	.word 0
	.word 0
	.word FPU_IRQ_handler
	.word 0
	.word 0
	.word SPI4_IRQ_handler

	//where to boot ram from
#define boot_ram_base 0xf108f85f
	.word boot_ram_base

	//alaias's for each Interupt handaler pointing to default handaler until it is overridden 
  .weak NMI_handler
	.thumb_set NMI_handler,default_interrupt_handler
  .weak hard_handler
	.thumb_set hard_handler,default_interrupt_handler
  .weak MMF_handler
	.thumb_set MMF_handler,default_interrupt_handler
  .weak bus_handler
	.thumb_set bus_handler,default_interrupt_handler
  .weak usage_handler
	.thumb_set usage_handler,default_interrupt_handler
  .weak SVC_handler
	.thumb_set SVC_handler,default_interrupt_handler
  .weak pending_SV_handler
	.thumb_set pending_SV_handler,default_interrupt_handler
  .weak SYSTick_handler
	.thumb_set SYSTick_handler,default_interrupt_handler
  .weak WWDG_IRQ_handler
	.thumb_set window_watchdog_IRQ_handler,default_interrupt_handler
  .weak PVD_IRQ_handler
	.thumb_set PVD_IRQ_handler,default_interrupt_handler
  .weak TAMP_IRQ_handler
	.thumb_set TAMP_IRQ_handler,default_interrupt_handler
  .weak RTC_IRQ_handler
	.thumb_set RTC_IRQ_handler,default_interrupt_handler
  .weak flash_IRQ_handler
	.thumb_set flash_IRQ_handler,default_interrupt_handler
  .weak RCC_IRQ_handler
	.thumb_set RCC_IRQ_handler,default_interrupt_handler
  .weak EXTI0_IRQ_handler
	.thumb_set EXTI0_IRQ_handler,default_interrupt_handler
  .weak EXTI1_IRQ_handler
	.thumb_set EXTI1_IRQ_handler,default_interrupt_handler
  .weak EXTI2_IRQ_handler
	.thumb_set EXTI2_IRQ_handler,default_interrupt_handler
  .weak EXTI3_IRQ_handler
	.thumb_set EXTI3_IRQ_handler,default_interrupt_handler
  .weak EXTI4_IRQ_handler
	.thumb_set EXTI4_IRQ_handler,default_interrupt_handler
  .weak DMA1_S0_IRQ_handler
	.thumb_set DMA1_S0_IRQ_handler,default_interrupt_handler
  .weak DMA1_S1_IRQ_handler
	.thumb_set DMA1_S1_IRQ_handler,default_interrupt_handler
  .weak DMA1_S2_IRQ_handler
	.thumb_set DMA1_S2_IRQ_handler,default_interrupt_handler
  .weak DMA1_S3_IRQ_handler
	.thumb_set DMA1_S3_IRQ_handler,default_interrupt_handler
  .weak DMA1_S4_IRQ_handler
	.thumb_set DMA1_S4_IRQ_handler,default_interrupt_handler
  .weak DMA1_S5_IRQ_handler
	.thumb_set DMA1_S5_IRQ_handler,default_interrupt_handler
  .weak DMA1_S6_IRQ_handler
	.thumb_set DMA1_S6_IRQ_handler,default_interrupt_handler
  .weak ADC_IRQ_handler
	.thumb_set ADC_IRQ_handler,default_interrupt_handler
  .weak TIM1_BR_IRQ_handler
	.thumb_set TIM1_BR_IRQ_handler,default_interrupt_handler
  .weak TIM1_UP_IRQ_handler
	.thumb_set TIM1_UP_IRQ_handler,default_interrupt_handler
  .weak TIM1_TC_IRQ_handler
	.thumb_set TIM1_TC_IRQ_handler,default_interrupt_handler
  .weak TIM1_CC_IRQ_handler
	.thumb_set TIM1_CC_IRQ_handler,default_interrupt_handler
  .weak TIM2_IRQ_handler
	.thumb_set TIM2_IRQ_handler,default_interrupt_handler
  .weak TIM3_IRQ_handler
	.thumb_set TIM3_IRQ_handler,default_interrupt_handler
  .weak TIM4_IRQ_handler
	.thumb_set TIM14_IRQ_handler,default_interrupt_handler
  .weak I2C1_EV_IRQ_handler
	.thumb_set I2C1_EV_IRQ_handler,default_interrupt_handler
  .weak I2C1_ER_IRQ_handler
	.thumb_set I2C1_ER_IRQ_handler,default_interrupt_handler
  .weak SPI1_IRQ_handler
	.thumb_set SPI1_IRQ_handler,default_interrupt_handler
  .weak SPI2_IRQ_handler
	.thumb_set SPI2_IRQ_handler,default_interrupt_handler
  .weak USART1_IRQ_handler
	.thumb_set USART1_IRQ_handler,default_interrupt_handler
  .weak USART2_IRQ_handler
	.thumb_set USART2_IRQ_handler,default_interrupt_handler
  .weak EXTI15_IRQ_handler
	.thumb_set EXTI15_IRQ_handler,default_interrupt_handler
  .weak RTC_Alarm_IRQ_handler
	.thumb_set RTC_Alarm_IRQ_handler,default_interrupt_handler
  .weak OTG_WKUP_IRQ_handler
	.thumb_set OTG_WKUP_IRQ_handler,default_interrupt_handler
  .weak DMA1_S7_IRQ_handler
	.thumb_set DMA1_S7_IRQ_handler,default_interrupt_handler
  .weak SDIO_IRQ_handler
	.thumb_set SDIO_IRQ_handler,default_interrupt_handler
  .weak TIM5_IRQ_handler
	.thumb_set TIM5_IRQ_handler,default_interrupt_handler
  .weak SPI3_IRQ_handler
	.thumb_set SPI3_IRQ_handler,default_interrupt_handler
  .weak DMA2_S0_IRQ_handler
	.thumb_set DMA2_S0_IRQ_handler,default_interrupt_handler
  .weak DMA2_S1_IRQ_handler
	.thumb_set DMA2_S1_IRQ_handler,default_interrupt_handler
  .weak DMA2_S2_IRQ_handler
	.thumb_set DMA2_S2_IRQ_handler,default_interrupt_handler
  .weak DMA2_S3_IRQ_handler
	.thumb_set DMA2_S3_IRQ_handler,default_interrupt_handler
  .weak DMA2_S4_IRQ_handler
	.thumb_set DMA2_S4_IRQ_handler,default_interrupt_handler
  .weak OTG_IRQ_handler
	.thumb_set OTG_IRQ_handler,default_interrupt_handler
  .weak DMA2_S5_IRQ_handler
	.thumb_set DMA2_S5_IRQ_handler,default_interrupt_handler
  .weak DMA2_S6_IRQ_handler
	.thumb_set DMA2_S6_IRQ_handler,default_interrupt_handler
  .weak DMA2_S7_IRQ_handler
	.thumb_set DMA2_S7_IRQ_handler,default_interrupt_handler
  .weak USART6_IRQ_handler
	.thumb_set USART6_IRQ_handler,default_interrupt_handler
  .weak I2C3_EV_IRQ_handler
	.thumb_set I2C3_EV_IRQ_handler,default_interrupt_handler
  .weak I2C3_ER_IRQ_handler
	.thumb_set I2C3_ER_IRQ_handler,default_interrupt_handler
  .weak FPU_IRQ_handler
	.thumb_set FPU_IRQ_handler,default_interrupt_handler
  .weak SPI4_IRQ_handler
	.thumb_set SPI4_IRQ_handler,default_interrupt_handler
.size vtable, .-vtable

//default interupt handler / infinite loop
.section .text.default_interrupt_handler, "ax", %progbits
default_interrupt_handler:
default_interrupt_loop:
	B default_interrupt_loop
.size default_interrupt_handler, .-default_interrupt_handler
